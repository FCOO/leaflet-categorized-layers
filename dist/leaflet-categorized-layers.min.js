!function(a,b,c,d,e){"use strict";b.Control.CategorizedLayers=b.Control.Layers.extend({options:{VERSION:"0.0.9",collapsed:!0,groupsCollapsed:!0,collapseActiveGroups:!1,position:"topright",mobileMode:!1,autoZIndex:!0},initialize:function(a,c,d){b.setOptions(this,d);var e="leaflet-control-layers";this._container=b.DomUtil.create("div",e),this._layers={},this._overlays={},this._groups={baseLayer:{},overlay:{}},this._lastZIndex=0,this._handlingClick=!1;for(var f in a){this._layers[f]={};for(var g in a[f])a[f][g]._category=f,a[f][g]._name=g,a[f][g]._overlay=!1,a[f][g]._categoryType="baseLayer",this._addLayer(a[f][g],f,!1)}for(var h in c){this._overlays[h]={};for(var i in c[h])c[h][i]._category=h,c[h][i]._name=i,c[h][i]._overlay=!0,c[h][i]._categoryType="overlay",this._addLayer(c[h][i],h,!0)}},_onLayerChange:function(a){var c=a.layer._overlay?this._overlays[a.layer._category]:this._layers[a.layer._category];if(c){var d=c[b.stamp(a.layer)];if(d){this._handlingClick||this._update();var e=d._overlay?"layeradd"===a.type?"overlayadd":"overlayremove":"layeradd"===a.type?"baselayerchange":null;e&&this._map.fire(e,a)}}},addBaseLayer:function(a,b,c){return a._category=b,a._name=c,a._overlay=!1,a._categoryType="baseLayer",this._addLayer(a,b),this._update(),this},addOverlay:function(a,b,c){return a._category=b,a._name=c,a._overlay=!0,a._categoryType="overlay",this._addLayer(a,b),this._update(),this},removeLayer:function(a){var c=b.stamp(a);return delete this._layers[c],this._update(),this},_addLayer:function(a,c,d){var e=b.stamp(a);a._overlay||d?(this._overlays[a._category]||(this._overlays[a._category]={}),this._overlays[a._category][e]=a):(this._layers[a._category]||(this._layers[a._category]={}),this._layers[a._category][e]=a),this.options.autoZIndex&&a.setZIndex&&(this._lastZIndex++,a.setZIndex(this._lastZIndex))},_update:function(){if(this._container){this._baseLayersList.innerHTML="",this._overlaysList.innerHTML="",this._groups={baseLayer:{},overlay:{}};var c,d=!1,e=!1;if(this.options.mobileMode){var f="leaflet-control-layers";this._baseLayersSelect=a(b.DomUtil.create("select",f+"-group",this._baseLayersList)),this._overlaysSelect=a(b.DomUtil.create("select",f+"-group",this._overlaysList)),this._baseLayersSelect.on("change",this,this._onSelectChange),this._overlaysSelect.on("change",this,this._onSelectChange),this._overlaysSelect.attr("multiple","multiple")}for(var g in this._layers)for(var h in this._layers[g])c=this._layers[g][h],this._addItem(c),e=e||c._overlay,d=d||!c._overlay;for(var i in this._overlays)for(var j in this._overlays[i])c=this._overlays[i][j],this._addItem(c),e=e||c._overlay,d=d||!c._overlay;this._separator.style.display=e&&d?"":"none"}},_addItem:function(c){var e,f,g,h,i,j="leaflet-control-layers";if(!this._groups[c._categoryType][c._category])if(this.options.mobileMode){var k=a("<option></option>").val(c._category).html(c._category),l=c._overlay?this._overlaysSelect:this._baseLayersSelect;this._groups[c._categoryType][c._category]=l,l.append(k),k.attr("disabled","disabled"),k.prop("layerId",b.stamp(c)),k.prop("category",c._category),k.prop("overlay",c._overlay)}else{var m=b.DomUtil.create("div",j+"-group"),n=d.createElement("span"),o=this.options.groupsCollapsed?n.innerHTML=" &#9658; ":n.innerHTML=" &#9660; ";n.innerHTML+=c._category,n.className="groupHeader",n.category=c._category,n.collapsed=o,b.DomEvent.on(n,"click",this._onLabelClick),m.appendChild(n);var p=d.createElement("span");p.className="groupLayers",o&&(p.style.height="0",p.style.display="none"),m.appendChild(p),this._groups[c._categoryType][c._category]=p,i=c._overlay?this._overlaysList:this._baseLayersList,i.appendChild(m)}if(f=this._groups[c._categoryType][c._category],g=this._map.hasLayer(c),!this.options.mobileMode){h=d.createElement("label"),g&&!this.options.collapseActiveGroups&&(f.previousSibling.innerHTML=" &#9660; "+f.previousSibling.category,f.previousSibling.collapsed=!1,f.style.height="100%",f.style.display="block"),c._overlay?(e=d.createElement("input"),e.type="checkbox",e.className="leaflet-control-layers-selector",e.defaultChecked=g):e=this._createRadioElement("leaflet-base-layers",g),e.layerId=b.stamp(c),e.category=c._category,e.overlay=c._overlay,h.appendChild(e);var q=e.overlay?this._overlays[e.category][e.layerId]:this._layers[e.category][e.layerId];a(e).createRadioCheckbox(q.options.primadonna?"input-radio":null),a(e).parent().css({display:"inline-block",top:"1px","margin-top":"2px","margin-right":"2px"});var r=d.createElement("span");return r.innerHTML=" "+c._name,h.appendChild(r),b.DomEvent.on(h,"click",this._onInputClick,this),f.appendChild(h),h}var s=a("<option></option>").val(c._name).html(c._name);a(f).append(s),s.prop("layerId",b.stamp(c)),s.prop("category",c._category),s.prop("overlay",c._overlay),s.prop("layer",c),s.prop("selected",g)},_onLabelClick:function(){this.collapsed?(this.collapsed=!1,this.innerHTML=" &#9660; "+this.category,a(this).next().css({height:"100%",display:"block"})):(this.collapsed=!0,this.innerHTML=" &#9658; "+this.category,a(this).next().css({height:"0",display:"none"}))},_onSelectChange:function(b){var c,d,e,f,g,h,i=b.data,j=b.data._form.getElementsByTagName("select"),k=j.length,l=b.originalEvent.explicitOriginalTarget,m=null,n=null;for(this._handlingClick=!0,d=0;k>d;d++)for(g=j[d].options,h=g.length,c=0;h>c;c++)e=g[c],"disabled"!==a(e).attr("disabled")&&(f=e.overlay?i._overlays[e.category][e.layerId]:i._layers[e.category][e.layerId],e.selected&&!i._map.hasLayer(f)?(i._map.addLayer(f),m=d,n=c,i._map.fire("overlayadd")):!e.selected&&i._map.hasLayer(f)&&(i._map.removeLayer(f),i._map.fire("overlayremove")));if(null!==n){var o=l.layer;if(o.options.primadonna)for(c=0;h>c;c++)e=g[c],f=e.overlay?i._overlays[e.category][e.layerId]:i._layers[e.category][e.layerId],f!==o&&e.selected&&i._map.hasLayer(f)&&f.options.primadonna&&(a(j[m].options[e.index]).prop("selected",!1),i._onSelectChange(b))}i._handlingClick=!1},_onInputClick:function(){var a,b,c=this._form.getElementsByTagName("input"),d=c.length;this._handlingClick=!0;var e,f=null;for(a=0;d>a;a++)b=c[a],e=b.overlay?this._overlays[b.category][b.layerId]:this._layers[b.category][b.layerId],b.checked&&!this._map.hasLayer(e)?(this._map.addLayer(e),f=a,this._map.fire("overlayadd")):!b.checked&&this._map.hasLayer(e)&&(this._map.removeLayer(e),this._map.fire("overlayremove"));if(null!==f){b=c[f];var g=b.overlay?this._overlays[b.category][b.layerId]:this._layers[b.category][b.layerId];if(g.options.primadonna)for(a=0;d>a;a++)b=c[a],e=b.overlay?this._overlays[b.category][b.layerId]:this._layers[b.category][b.layerId],e!==g&&b.checked&&this._map.hasLayer(e)&&e.options.primadonna&&(b.checked=!1,this._onInputClick())}this._handlingClick=!1},_initLayout:function(){var a="leaflet-control-layers",c=this._container;b.Browser.touch?b.DomEvent.on(c,"click",b.DomEvent.stopPropagation):b.DomEvent.disableClickPropagation(c).disableScrollPropagation(c);var d=this._form=b.DomUtil.create("form",a+"-list");if(this.options.collapsed){var e=this._layersLink=b.DomUtil.create("a",a+"-toggle",c);e.href="#",e.title="Layers",b.Browser.touch?(b.DomEvent.on(e,"click",b.DomEvent.stop).on(e,"click",this._expand,this),b.DomEvent.disableClickPropagation(c).disableScrollPropagation(c)):b.DomEvent.on(e,"focus",this._expand,this),b.DomEvent.on(d,"click",function(){setTimeout(b.bind(this._onInputClick,this),0)},this),this._map.on("click",this._collapse,this)}else this._expand();this._baseLayersList=b.DomUtil.create("div",a+"-base",d),this._separator=b.DomUtil.create("div",a+"-sub-separator",d),this._overlaysList=b.DomUtil.create("div",a+"-overlays",d),c.appendChild(d)},_expand:function(){b.DomUtil.addClass(this._container,"leaflet-control-layers-expanded")},_collapse:function(){this._container.className=this._container.className.replace(" leaflet-control-layers-expanded","")},_checkDisabledLayers:function(){}})}(jQuery,L,this,document);;!function(a,b,c,d,e){"use strict";function f(b,c,d){this.id=b,this.onChange=c,this.allowZeroSelected=d,this.selectedIndex=-1,this.children=[],this.addChild=function(b){b.parent().hasClass("input-radio")||b.createRadioCheckbox(),this.allowZeroSelected&&b.attr("type","checkbox");var c=this;b.data("radio-group-index",this.children.length),b.change(function(){c._onChange(a(this).data("radio-group-index"))}),this.children.push(b)},this._onChange=function(a){this.allowZeroSelected&&this.selectedIndex>-1&&(this.onChange(this.children[this.selectedIndex].attr("id"),!1,this),this.children[this.selectedIndex].prop("checked",!1)),this.selectedIndex=this.selectedIndex==a?-1:a,this.selectedIndex>-1&&this.onChange(this.children[this.selectedIndex].attr("id"),!0,this)}}c.RadioGroup=f;var g=0;a.fn.createRadioCheckbox=function(b){var c="";if(b?(c=b,"input-radio"==b&&this.addClass("display-as-radio")):c=this.hasClass("display-as-checkbox")?"input-checkbox":this.hasClass("display-as-radio")?"input-radio":"checkbox"==this.attr("type")?"input-checkbox":"input-radio",this.parent().hasClass(c))return this;var d=this.attr("id");return d||(d="_defaultCheckbox_"+g++,this.attr("id",d)),this.before("<div></div>").prev().addClass(c).append(this),a("<label></label>").insertAfter(this).attr("for",d),this},a.fn.checkboxGroup=function(){return this.data("is-checkbox-group",!0),this.data("checkbox-children",[]),this.click(function(){var b=a(this).prop("checked");a.each(a(this).data("checkbox-children"),function(a,c){c.prop("checked",!b).trigger("click")})}),this.on("clickchild",function(){var b=0,c=0;a.each(a(this).data("checkbox-children"),function(a,d){d.prop("checked")?b++:c++}),a(this).toggleClass("semi-selected",b*c!==0),a(this).prop("checked",!!b)}),this},a.fn.checkboxGroupAddChild=function(a){var b=this;a.data("checkbox-parent",this);var c=this.data("checkbox-children");c.push(a),this.data("checkbox-children",c),a.click(function(){b.trigger("clickchild")}),this.trigger("clickchild")},a.fn.checkboxGroupRemoveChild=function(a){a.data("checkbox-parent",this);for(var b=this.data("checkbox-children"),c=0;c<b.length;c++)if(b[c].get(0)==a.get(0)){b.splice(c,1);break}this.data("checkbox-children",b),this.trigger("clickchild")},a.fn.removeFromCheckboxGroup=function(){var a=this.data("checkbox-parent");a&&a.checkboxGroupRemoveChild(this)},a.fn.checkbox_updateCheckboxGroup=function(){var a=this.data("checkbox-parent");a&&a.trigger("clickchild")},a(function(){a("input:radio, input:checkbox").each(function(){a(this).createRadioCheckbox()})})}(jQuery,L,this,document);